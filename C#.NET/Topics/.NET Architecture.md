---
title: .NET Architecture ‚Äî –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ .NET
tags:
  - dotnet
  - architecture
  - clr
  - topic
---

# .NET Architecture ‚Äî –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ .NET

**–ù–∞–≤–∏–≥–∞—Ü–∏—è:** [[../README|‚Üê C#.NET]] ¬∑ [[C# Memory Management|–ü—Ä–µ–¥—ã–¥—É—â–∞—è: Memory]] ¬∑ [[.NET Middleware|–°–ª–µ–¥—É—é—â–∞—è: Middleware]] ¬∑ [[../Generated tests/dotnet_test|Tests]]

---

## 1. –û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã .NET

### –ß—Ç–æ —Ç–∞–∫–æ–µ .NET?
**.NET** - —ç—Ç–æ –±–µ—Å–ø–ª–∞—Ç–Ω–∞—è –∫—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å –æ—Ç–∫—Ä—ã—Ç—ã–º –∏—Å—Ö–æ–¥–Ω—ã–º –∫–æ–¥–æ–º, —Å–æ–∑–¥–∞–Ω–Ω–∞—è Microsoft –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- **CLR (Common Language Runtime)** - —Å—Ä–µ–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- **BCL (Base Class Library)** - –±–∞–∑–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã
- **FCL (Framework Class Library)** - —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∫–ª–∞—Å—Å–æ–≤
- **–Ø–∑—ã–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è** - C#, F#, Visual Basic
- **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏** - Visual Studio, .NET CLI

## 2. .NET Framework vs .NET Core vs .NET 5+

### .NET Framework (Legacy)
- **–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞:** –¢–æ–ª—å–∫–æ Windows
- **–í–µ—Ä—Å–∏–∏:** 1.0 - 4.8
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:** –ó—Ä–µ–ª–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞, –º–Ω–æ–≥–æ legacy –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Windows

### .NET Core (Discontinued)
- **–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞:** –ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–∞—è
- **–í–µ—Ä—Å–∏–∏:** 1.0 - 3.1
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:** –í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –º–æ–¥—É–ª—å–Ω–æ—Å—Ç—å
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã, –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### .NET 5+ (Unified)
- **–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞:** –ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–∞—è
- **–í–µ—Ä—Å–∏–∏:** 5.0, 6.0, 7.0, 8.0
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:** –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º, –≤—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –í—Å–µ —Ç–∏–ø—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

## 3. CLR (Common Language Runtime)

### –ß—Ç–æ —Ç–∞–∫–æ–µ CLR?
**CLR** - —ç—Ç–æ —Å—Ä–µ–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä–∞—è —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º .NET –ø—Ä–æ–≥—Ä–∞–º–º.

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
```csharp
// –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã CLR
public class Program
{
    public static void Main()
    {
        // CLR –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
        // 1. –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Å–±–æ—Ä–∫—É
        // 2. –í—ã–ø–æ–ª–Ω—è–µ—Ç JIT –∫–æ–º–ø–∏–ª—è—Ü–∏—é
        // 3. –£–ø—Ä–∞–≤–ª—è–µ—Ç –ø–∞–º—è—Ç—å—é
        // 4. –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏—è
        
        var calculator = new Calculator();
        int result = calculator.Add(5, 3);
        Console.WriteLine($"Result: {result}");
    }
}

public class Calculator
{
    public int Add(int a, int b) => a + b;
}
```

### –ü—Ä–æ—Ü–µ—Å—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:
1. **–ö–æ–º–ø–∏–ª—è—Ü–∏—è C# –≤ IL (Intermediate Language)**
2. **–ó–∞–≥—Ä—É–∑–∫–∞ —Å–±–æ—Ä–∫–∏ –≤ CLR**
3. **JIT –∫–æ–º–ø–∏–ª—è—Ü–∏—è IL –≤ –º–∞—à–∏–Ω–Ω—ã–π –∫–æ–¥**
4. **–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–∞—à–∏–Ω–Ω–æ–≥–æ –∫–æ–¥–∞**

## 4. –°–±–æ—Ä–∫–∏ (Assemblies)

### –ß—Ç–æ —Ç–∞–∫–æ–µ —Å–±–æ—Ä–∫–∞?
**–°–±–æ—Ä–∫–∞** - —ç—Ç–æ –µ–¥–∏–Ω–∏—Ü–∞ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –≤ .NET, —Å–æ–¥–µ—Ä–∂–∞—â–∞—è IL –∫–æ–¥, –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∏ —Ä–µ—Å—É—Ä—Å—ã.

### –¢–∏–ø—ã —Å–±–æ—Ä–æ–∫:
```csharp
// –ò—Å–ø–æ–ª–Ω—è–µ–º–∞—è —Å–±–æ—Ä–∫–∞ (.exe)
// Program.cs -> Program.exe

// –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ (.dll)
// MyLibrary.cs -> MyLibrary.dll

// –°–±–æ—Ä–∫–∞ —Å —Ä–µ—Å—É—Ä—Å–∞–º–∏
[assembly: AssemblyTitle("My Application")]
[assembly: AssemblyVersion("1.0.0.0")]
[assembly: AssemblyFileVersion("1.0.0.0")]
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–±–æ—Ä–∫–∏:
```
MyAssembly.dll
‚îú‚îÄ‚îÄ Assembly Manifest (–º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ)
‚îú‚îÄ‚îÄ IL Code (–ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π —è–∑—ã–∫)
‚îú‚îÄ‚îÄ Resources (—Ä–µ—Å—É—Ä—Å—ã)
‚îî‚îÄ‚îÄ Dependencies (–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏)
```

## 5. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é

### –°–±–æ—Ä—â–∏–∫ –º—É—Å–æ—Ä–∞ (Garbage Collector)
```csharp
public class MemoryExample
{
    public void DemonstrateGC()
    {
        // –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤
        var list = new List<string>();
        for (int i = 0; i < 1000000; i++)
        {
            list.Add($"Item {i}");
        }
        
        // –û–±—ä–µ–∫—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è GC
        // –∫–æ–≥–¥–∞ –Ω–∞ –Ω–∏—Ö –Ω–µ—Ç —Å—Å—ã–ª–æ–∫
        
        // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π –≤—ã–∑–æ–≤ GC (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
        GC.Collect();
        GC.WaitForPendingFinalizers();
    }
}
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ using statement:
```csharp
public class ResourceManager
{
    public void UseResource()
    {
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
        using (var stream = new FileStream("test.txt", FileMode.Open))
        using (var reader = new StreamReader(stream))
        {
            string content = reader.ReadToEnd();
            Console.WriteLine(content);
        } // –†–µ—Å—É—Ä—Å—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Å–≤–æ–±–æ–∂–¥–∞—é—Ç—Å—è
    }
    
    // C# 8.0+ using declaration
    public void UseResourceModern()
    {
        using var stream = new FileStream("test.txt", FileMode.Open);
        using var reader = new StreamReader(stream);
        string content = reader.ReadToEnd();
        Console.WriteLine(content);
    } // –†–µ—Å—É—Ä—Å—ã –æ—Å–≤–æ–±–æ–∂–¥–∞—é—Ç—Å—è –≤ –∫–æ–Ω—Ü–µ –º–µ—Ç–æ–¥–∞
}
```

## 6. –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –∏ —Å–∏—Å—Ç–µ–º—ã —Ç–∏–ø–æ–≤

### Value Types vs Reference Types
```csharp
public class TypeSystemExample
{
    public void DemonstrateTypes()
    {
        // Value Types (—Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Å—Ç–µ–∫–µ)
        int number = 42;
        double price = 19.99;
        DateTime date = DateTime.Now;
        Point point = new Point(10, 20);
        
        // Reference Types (—Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –∫—É—á–µ)
        string text = "Hello";
        object obj = new object();
        List<int> numbers = new List<int>();
        CustomClass instance = new CustomClass();
        
        // Boxing (value type -> reference type)
        object boxedNumber = number; // Boxing
        
        // Unboxing (reference type -> value type)
        int unboxedNumber = (int)boxedNumber; // Unboxing
    }
}

// Value type (struct)
public struct Point
{
    public int X { get; set; }
    public int Y { get; set; }
    
    public Point(int x, int y)
    {
        X = x;
        Y = y;
    }
}

// Reference type (class)
public class CustomClass
{
    public string Name { get; set; }
}
```

## 7. –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∏ —Ä–µ—Ñ–ª–µ–∫—Å–∏—è

### –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
```csharp
// –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–æ–º
public class Person
{
    [Required]
    [StringLength(100)]
    public string Name { get; set; }
    
    [Range(0, 150)]
    public int Age { get; set; }
    
    [EmailAddress]
    public string Email { get; set; }
}
```

### –†–µ—Ñ–ª–µ–∫—Å–∏—è
```csharp
public class ReflectionExample
{
    public void DemonstrateReflection()
    {
        // –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–∏–ø–∞ –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
        Type personType = typeof(Person);
        
        // –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤
        PropertyInfo[] properties = personType.GetProperties();
        foreach (var prop in properties)
        {
            Console.WriteLine($"Property: {prop.Name}, Type: {prop.PropertyType}");
            
            // –ü–æ–ª—É—á–µ–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ç–æ–≤
            var attributes = prop.GetCustomAttributes(true);
            foreach (var attr in attributes)
            {
                Console.WriteLine($"  Attribute: {attr.GetType().Name}");
            }
        }
        
        // –°–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ —á–µ—Ä–µ–∑ —Ä–µ—Ñ–ª–µ–∫—Å–∏—é
        var person = Activator.CreateInstance<Person>();
        
        // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–Ω–∞—á–µ–Ω–∏—è —Å–≤–æ–π—Å—Ç–≤–∞
        var nameProperty = personType.GetProperty("Name");
        nameProperty?.SetValue(person, "John Doe");
    }
}
```

## 8. –ê—Ç—Ä–∏–±—É—Ç—ã

### –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã:
```csharp
// –ê—Ç—Ä–∏–±—É—Ç –¥–ª—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏
[Serializable]
public class SerializableClass
{
    public string Name { get; set; }
    public int Age { get; set; }
}

// –ê—Ç—Ä–∏–±—É—Ç –¥–ª—è —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –º–µ—Ç–æ–¥–æ–≤
[Obsolete("Use NewMethod instead", true)]
public void OldMethod()
{
    // –£—Å—Ç–∞—Ä–µ–≤—à–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
}

// –ê—Ç—Ä–∏–±—É—Ç –¥–ª—è —É—Å–ª–æ–≤–Ω–æ–π –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
[Conditional("DEBUG")]
public void DebugMethod()
{
    Console.WriteLine("This method only runs in DEBUG mode");
}

// –ê—Ç—Ä–∏–±—É—Ç –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
public class ValidationExample
{
    [Required(ErrorMessage = "Name is required")]
    [StringLength(50, MinimumLength = 2)]
    public string Name { get; set; }
    
    [Range(18, 100, ErrorMessage = "Age must be between 18 and 100")]
    public int Age { get; set; }
    
    [RegularExpression(@"^[^@\s]+@[^@\s]+\.[^@\s]+$")]
    public string Email { get; set; }
}
```

### –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∞—Ç—Ä–∏–±—É—Ç–æ–≤:
```csharp
[AttributeUsage(AttributeTargets.Class | AttributeTargets.Method)]
public class CustomAttribute : Attribute
{
    public string Description { get; }
    public int Priority { get; set; }
    
    public CustomAttribute(string description)
    {
        Description = description;
        Priority = 1;
    }
}

[Custom("Important business logic", Priority = 5)]
public class BusinessService
{
    [Custom("Critical operation")]
    public void ProcessData()
    {
        // –†–µ–∞–ª–∏–∑–∞—Ü–∏—è
    }
}
```

## 9. –ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –∏–º–µ–Ω –∏ —Å–±–æ—Ä–∫–∏

### –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –∫–æ–¥–∞:
```csharp
// –ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –∏–º–µ–Ω –¥–ª—è –ª–æ–≥–∏—á–µ—Å–∫–æ–π –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏
namespace MyCompany.MyProject
{
    namespace Models
    {
        public class User { }
        public class Product { }
    }
    
    namespace Services
    {
        public class UserService { }
        public class ProductService { }
    }
    
    namespace Controllers
    {
        public class UserController { }
        public class ProductController { }
    }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ using –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞
using MyCompany.MyProject.Models;
using MyCompany.MyProject.Services;
using MyCompany.MyProject.Controllers;

// –ì–ª–æ–±–∞–ª—å–Ω—ã–µ using (C# 10.0+)
global using System;
global using System.Collections.Generic;
global using System.Linq;
```

## 10. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### appsettings.json:
```json
{
  "ConnectionStrings": {
    "DefaultConnection": "Server=localhost;Database=MyDb;Trusted_Connection=true;"
  },
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft": "Warning",
      "Microsoft.Hosting.Lifetime": "Information"
    }
  },
  "AppSettings": {
    "ApiKey": "your-api-key",
    "MaxRetryAttempts": 3,
    "TimeoutSeconds": 30
  }
}
```

### –†–∞–±–æ—Ç–∞ —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π:
```csharp
public class ConfigurationExample
{
    private readonly IConfiguration _configuration;
    
    public ConfigurationExample(IConfiguration configuration)
    {
        _configuration = configuration;
    }
    
    public void UseConfiguration()
    {
        // –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
        string connectionString = _configuration.GetConnectionString("DefaultConnection");
        
        // –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è
        string apiKey = _configuration["AppSettings:ApiKey"];
        int maxRetries = _configuration.GetValue<int>("AppSettings:MaxRetryAttempts");
        
        // –ü—Ä–∏–≤—è–∑–∫–∞ –∫ –æ–±—ä–µ–∫—Ç—É
        var appSettings = new AppSettings();
        _configuration.GetSection("AppSettings").Bind(appSettings);
    }
}

public class AppSettings
{
    public string ApiKey { get; set; }
    public int MaxRetryAttempts { get; set; }
    public int TimeoutSeconds { get; set; }
}
```

## 11. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:
```csharp
public class LoggingExample
{
    private readonly ILogger<LoggingExample> _logger;
    
    public LoggingExample(ILogger<LoggingExample> logger)
    {
        _logger = logger;
    }
    
    public void ProcessData()
    {
        _logger.LogInformation("Starting data processing");
        
        try
        {
            // –õ–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏
            _logger.LogDebug("Processing item {ItemId}", 123);
            
            if (someCondition)
            {
                _logger.LogWarning("Unexpected condition encountered");
            }
        }
        catch (Exception ex)
        {
            _logger.LogError(ex, "Error occurred while processing data");
            throw;
        }
        
        _logger.LogInformation("Data processing completed successfully");
    }
}
```

## 12. Dependency Injection

### –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:
```csharp
// –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤
public class Startup
{
    public void ConfigureServices(IServiceCollection services)
    {
        // Singleton - –æ–¥–∏–Ω —ç–∫–∑–µ–º–ø–ª—è—Ä –Ω–∞ –≤—Å–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
        services.AddSingleton<IConfigurationService, ConfigurationService>();
        
        // Scoped - –æ–¥–∏–Ω —ç–∫–∑–µ–º–ø–ª—è—Ä –Ω–∞ –∑–∞–ø—Ä–æ—Å
        services.AddScoped<IUserService, UserService>();
        
        // Transient - –Ω–æ–≤—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–∞–∂–¥—ã–π —Ä–∞–∑
        services.AddTransient<IEmailService, EmailService>();
        
        // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ —Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π
        services.AddScoped<IRepository<User>, UserRepository>();
        
        // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å —Ñ–∞–±—Ä–∏–∫–æ–π
        services.AddScoped<IConnectionFactory>(provider =>
        {
            var config = provider.GetService<IConfiguration>();
            return new ConnectionFactory(config.GetConnectionString("Default"));
        });
    }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ DI
public class UserController
{
    private readonly IUserService _userService;
    private readonly ILogger<UserController> _logger;
    
    public UserController(IUserService userService, ILogger<UserController> logger)
    {
        _userService = userService;
        _logger = logger;
    }
    
    public async Task<IActionResult> GetUser(int id)
    {
        var user = await _userService.GetByIdAsync(id);
        return Ok(user);
    }
}
```

## –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞–Ω–∏—è:

1. **–°–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö
2. **–†–µ–∞–ª–∏–∑—É–π—Ç–µ –∫–ª–∞—Å—Å —Å –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏** –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
3. **–°–æ–∑–¥–∞–π—Ç–µ –±–∏–±–ª–∏–æ—Ç–µ–∫—É –∫–ª–∞—Å—Å–æ–≤** —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤ –∏–º–µ–Ω
4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
5. **–†–µ–∞–ª–∏–∑—É–π—Ç–µ Dependency Injection** –¥–ª—è –ø—Ä–æ—Å—Ç–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞

---

## üéØ –ë—ã—Å—Ç—Ä—ã–π –æ–ø—Ä–æ—Å–Ω–∏–∫

> [!tip] –ü—Ä–æ–π–¥–∏ –æ–ø—Ä–æ—Å–Ω–∏–∫ –ø–æ—Å–ª–µ –∏–∑—É—á–µ–Ω–∏—è —Ç–µ–æ—Ä–∏–∏

### –í–æ–ø—Ä–æ—Å 1
–ß—Ç–æ —Ç–∞–∫–æ–µ CLR –∏ –∫–∞–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –æ–Ω–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç?

<details>
<summary>–û—Ç–≤–µ—Ç</summary>

- CLR (Common Language Runtime) ‚Äî —Å—Ä–µ–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è .NET
- –§—É–Ω–∫—Ü–∏–∏: –∑–∞–≥—Ä—É–∑–∫–∞ —Å–±–æ—Ä–æ–∫, JIT –∫–æ–º–ø–∏–ª—è—Ü–∏—è, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é (GC), –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Ç–∏–ø–æ–≤, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π
- –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç IL –∫–æ–¥ –≤ –º–∞—à–∏–Ω–Ω—ã–π –∫–æ–¥ –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
</details>

---

### –í–æ–ø—Ä–æ—Å 2
–í —á–µ–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É .NET Framework, .NET Core –∏ .NET 5+?

<details>
<summary>–û—Ç–≤–µ—Ç</summary>

- **.NET Framework** ‚Äî —Ç–æ–ª—å–∫–æ Windows, legacy, –≤–µ—Ä—Å–∏–∏ 1.0-4.8
- **.NET Core** ‚Äî –∫—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã–π, –≤–µ—Ä—Å–∏–∏ 1.0-3.1, discontinued
- **.NET 5+** ‚Äî unified –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞, –∫—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–∞—è, –≤–µ—Ä—Å–∏–∏ 5.0, 6.0, 7.0, 8.0
- .NET 8 ‚Äî —Ç–µ–∫—É—â–∞—è LTS –≤–µ—Ä—Å–∏—è
</details>

---

### –í–æ–ø—Ä–æ—Å 3
–ß—Ç–æ —Ç–∞–∫–æ–µ —Å–±–æ—Ä–∫–∞ (Assembly) –≤ .NET?

<details>
<summary>–û—Ç–≤–µ—Ç</summary>

- –°–±–æ—Ä–∫–∞ ‚Äî –µ–¥–∏–Ω–∏—Ü–∞ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –∏ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –≤ .NET
- –°–æ–¥–µ—Ä–∂–∏—Ç IL –∫–æ–¥, –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ, –º–∞–Ω–∏—Ñ–µ—Å—Ç
- –ú–æ–∂–µ—Ç –±—ã—Ç—å .dll (–±–∏–±–ª–∏–æ—Ç–µ–∫–∞) –∏–ª–∏ .exe (–∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª)
- –ò–º–µ–µ—Ç –≤–µ—Ä—Å–∏—é, –∏–º—è, –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á
</details>

---

### –í–æ–ø—Ä–æ—Å 4
–ß—Ç–æ —Ç–∞–∫–æ–µ JIT –∫–æ–º–ø–∏–ª—è—Ü–∏—è?

<details>
<summary>–û—Ç–≤–µ—Ç</summary>

- JIT (Just-In-Time) ‚Äî –∫–æ–º–ø–∏–ª—è—Ü–∏—è IL –∫–æ–¥–∞ –≤ –º–∞—à–∏–Ω–Ω—ã–π –∫–æ–¥ –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- –ü—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—ã–∑–æ–≤–µ –º–µ—Ç–æ–¥–∞
- –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ –∫—ç—à–∏—Ä—É–µ—Ç—Å—è –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –ü–æ–∑–≤–æ–ª—è–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –ø–ª–∞—Ç—Ñ–æ—Ä–º—É
</details>

---

### –í–æ–ø—Ä–æ—Å 5
–ß—Ç–æ —Ç–∞–∫–æ–µ BCL –∏ FCL?

<details>
<summary>–û—Ç–≤–µ—Ç</summary>

- **BCL (Base Class Library)** ‚Äî –±–∞–∑–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã: System, System.Collections, System.IO
- **FCL (Framework Class Library)** ‚Äî —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞: ASP.NET, Entity Framework, WPF
- BCL –≤—Ö–æ–¥–∏—Ç –≤ .NET Core/.NET 5+, FCL ‚Äî –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
</details>

---

### –í–æ–ø—Ä–æ—Å 6
–ß—Ç–æ —Ç–∞–∫–æ–µ Native AOT –≤ .NET 8?

<details>
<summary>–û—Ç–≤–µ—Ç</summary>

- Native AOT (Ahead-Of-Time) ‚Äî –∫–æ–º–ø–∏–ª—è—Ü–∏—è –≤ –Ω–∞—Ç–∏–≤–Ω—ã–π –∫–æ–¥ –Ω–∞ —ç—Ç–∞–ø–µ —Å–±–æ—Ä–∫–∏
- –ù–µ—Ç JIT –∫–æ–º–ø–∏–ª—è—Ü–∏–∏, –Ω–µ—Ç CLR –≤ runtime
- –ú–µ–Ω—å—à–∏–π —Ä–∞–∑–º–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è: –Ω–µ—Ç —Ä–µ—Ñ–ª–µ–∫—Å–∏–∏, –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Å–±–æ—Ä–æ–∫
</details>

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ç–µ–º—ã

- [[C# Memory Management|Memory Management]] ‚Äî –ø—Ä–µ–¥—ã–¥—É—â–∞—è —Ç–µ–º–∞
- [[.NET Middleware|Middleware]] ‚Äî —Å–ª–µ–¥—É—é—â–∞—è —Ç–µ–º–∞
- [[../Generated tests/dotnet_test|–¢–µ—Å—Ç –ø–æ .NET]] ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–Ω–∞–Ω–∏–π

---

## üìñ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ—Ä—è–¥–æ–∫

1. –ò–∑—É—á–∏ —Ç–µ–æ—Ä–∏—é –≤—ã—à–µ
2. –ü—Ä–æ–π–¥–∏ –±—ã—Å—Ç—Ä—ã–π –æ–ø—Ä–æ—Å–Ω–∏–∫
3. –ü—Ä–æ–≤–µ—Ä—å –∑–Ω–∞–Ω–∏—è –≤ [[../Generated tests/dotnet_test|Generated Tests]]
4. –ü–µ—Ä–µ—Ö–æ–¥–∏ –∫ [[.NET Middleware|Middleware]]
